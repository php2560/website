{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Homework 2\"\nauthor: ''\ndate: \"March 26, 2016\"\noutput: pdf_document\n---\n\n\n\n<style type=\"text/css\">\n.table {\n\n    width: 80%;\n    margin-left:10%; \n    margin-right:10%;\n}\n</style>\n\n\n```{r, include=FALSE}\n# knitr settings to control how R chunks work.\nrequire(knitr)\nopts_chunk$set(\n  cache=TRUE,\n  eval=FALSE,     # This hides theoutput\n  message=FALSE,\n  warnning=FALSE,\n  size=\"footnotesize\"    # slightly smaller font for code\n)\n            \n```\n\n\n## The Data\n\nWe will continue analyzing data from the Behavioral Risk Factor Surveillance System (BRFSS). This is a national health-related telephone survey. There are more than 400,000 interviews done every year from all 50 states and the district of Columbia. To learn more about this survey please go to their website: [Behavioral Risk Factor Surveillance System](http://www.cdc.gov/brfss/). \n\n\n\n* [Codebook](https://drive.google.com/file/d/0B8CsRLdwqzbzTzQtMzdsa2xtTk0/view?usp=sharing)\n* [Data](https://drive.google.com/file/d/0B8CsRLdwqzbzd1RrRWp2RnBGTDg/view?usp=sharing)\n* [Variable Layout](http://www.cdc.gov/brfss/annual_data/2014/llcp_varlayout_14_onecolumn.html)\n\n\nWe will load our design file in that we worked with in the last lab. \n```{r, cache=TRUE}\nload(\"~/brfss.rda\")\n```\n\nWe will not list all the variables for this but instead will give you a copy of the question book that was used as well as the codebook which lists, the question, the variable name and what the data means. \n\n\n## Access to Healthcare\n\nOur question is to look over this data and try and understand access to health care in the US. Many disparities persist and to best inform ourselves as well as policies we need to understand what affects access to healthcare. Through the next series of labs and notes we will be focusing on the cost of health care as well as whether or not a subject has insurance. \n\nWe will not list out all of the variables but you will use the codebook to help find questions along with variable names and descriptions. A small list of initial variables considered follows below. \n\n\n---------------------------------------------------\nVariable      Description\n------------  -------------------------------------\nsex           Sex\n\nveteran3      Has person ever served in Military?\n\neduca         What is the highest level of education the person has obtained?\n\nchildren      How many children live in the household?\n\nemploy1       Are you currently employed?\n\nincome2       What is your household total income?\n\nimprace       Imputed Race\n\n\nage80         Imputed age\n\nhlthpln1      Health Insurance Coverage.\n\npersdoc2      Primary Care Doctor\n\nmedcost       Was the cost of medical care too expensive?\n--------------------------------------------------\n\n In lab we considered a model for whether cost was inhibitive. In homework our goal will be to build a model to understand whether someone has insurance or not. \n \n \\newpage\n \n \n1.  Perform a Hosmer- Lemeshew test for Goodness-of-fit. Remember the number of groups should be larger than the number of variables in the model. \n    a. State the Hypothesis.\n    b. What is your conclusion?\n    c. Does this change if you change the bin size?\n\n```{r}\nsuppressMessages(library(ResourceSelection))\nhoslem.test(brfss.design$variables$cost, fitted(model), g=20)\n```\n\n2. Another test we can use is a chi-square deviance goodness-of-fit test.\n    a. State the hypothesis.\n    b. What is your conclusion?\n```{r}\npchisq(model$deviance, df=model$df.residual, lower.tail=FALSE)\n```\n\n\n3. Create an ROC curve for this data. \n    a. What is the AUC?\n    b. What is your conclusion?\n```{r, eval=FALSE}\nsuppressMessages(library(ggplot2))\nsuppressMessages(library(ROCR))\n\n\nprob <- predict(model, type='response')\npred <- prediction(as.vector(prob), brfss.design$variables$cost)\nperf <- performance(pred, \"tpr\", \"fpr\")\n# I know, the following code is bizarre. Just go with it.\nauc <- performance(pred, measure = \"auc\")\nauc <- auc@y.values[[1]]\n\nroc.data <- data.frame(fpr=unlist(perf@x.values),\n                       tpr=unlist(perf@y.values),\n                       model=\"GLM\")\nggplot(roc.data, aes(x=fpr, ymin=0, ymax=tpr)) +\n  geom_ribbon(alpha=0.2) + geom_abline(intercept = 0, slope = 1, colour = \"gray\")+\n  geom_line(aes(y=tpr)) +\n  ggtitle(paste0(\"ROC Curve w/ AUC=\", auc))\n```\n\n\n\n4. What can you conclude about the fit that we have here? \n\n\n\n\\vspace{1in}\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by-nc/4.0/88x31.png\" /></a><br /><span xmlns:dct=\"http://purl.org/dc/terms/\" property=\"dct:title\">BRFSS Access to Health Care Analysis</span> by <span xmlns:cc=\"http://creativecommons.org/ns#\" property=\"cc:attributionName\">Adam J Sullivan, PhD</span> is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\">Creative Commons Attribution-NonCommercial 4.0 International License</a>.",
    "created" : 1491705320533.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "297549037",
    "id" : "7056D362",
    "lastKnownWriteTime" : 1463496639,
    "last_content_update" : 1463496639,
    "path" : "C:/Users/adam_/Dropbox/Brown/TSHS_Challenge/TSHS_challenge/HW2.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}